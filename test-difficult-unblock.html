<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Difficult Unblock Process</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn-danger {
            background: #dc3545;
        }
        .btn-danger:hover {
            background: #c82333;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .status {
            margin: 15px 0;
            padding: 15px;
            border-radius: 5px;
            background: #e9ecef;
        }
        .status.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .challenge-preview {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #007bff;
            margin: 10px 0;
        }
        h1, h2 {
            color: #333;
        }
        h1 {
            text-align: center;
            color: #dc3545;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "‚úì ";
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üö´ Difficult Unblock Process Tester</h1>
    
    <div class="test-section">
        <h2>üìã What Makes This Unblock Process Irritating:</h2>
        <ul class="feature-list">
            <li><strong>7 Mandatory Steps</strong> - Each step must be completed correctly</li>
            <li><strong>Complex Math Problems</strong> - Solve multi-operator equations</li>
            <li><strong>5-Minute Wait Timer</strong> - Forced reflection period</li>
            <li><strong>Case-Sensitive Captcha</strong> - Visual verification with special characters</li>
            <li><strong>Exact Typing Challenge</strong> - Must type productivity text perfectly (no copy/paste)</li>
            <li><strong>Pattern Recognition</strong> - Complete mathematical sequences</li>
            <li><strong>100+ Word Reflection</strong> - Write about productivity vs. distraction</li>
            <li><strong>Final Confirmation</strong> - Type exact phrase to confirm consequences</li>
            <li><strong>Copy/Paste Protection</strong> - All inputs monitored and blocked</li>
            <li><strong>Increasing Difficulty</strong> - More challenges added on repeat attempts</li>
            <li><strong>2-Hour Re-blocking</strong> - Site automatically blocked again</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üß™ Test the Difficult Unblock Process</h2>
        <p>Click the button below to experience the full challenge process:</p>
        
        <a href="difficult-unblock.html?url=facebook.com" class="btn btn-danger">
            üî• Test Difficult Unblock (Facebook Example)
        </a>
        
        <a href="difficult-unblock.html?url=youtube.com" class="btn btn-danger">
            üé• Test Difficult Unblock (YouTube Example)
        </a>
        
        <a href="difficult-unblock.html?url=reddit.com" class="btn btn-danger">
            üí¨ Test Difficult Unblock (Reddit Example)
        </a>
    </div>

    <div class="test-section">
        <h2>üéØ Challenge Previews</h2>
        
        <div class="challenge-preview">
            <strong>Challenge 1: Math Problem</strong><br>
            Example: "47 + 23 * 15 = ?" <br>
            <em>Users must solve complex multi-operator equations correctly.</em>
        </div>
        
        <div class="challenge-preview">
            <strong>Challenge 2: Wait Timer</strong><br>
            "Please wait 5:00 minutes while we process your request..."<br>
            <em>Forced waiting period with countdown timer.</em>
        </div>
        
        <div class="challenge-preview">
            <strong>Challenge 3: Visual Captcha</strong><br>
            "Type: X7mK9p" (styled with strikethrough and rotation)<br>
            <em>Case-sensitive captcha with visual distortions.</em>
        </div>
        
        <div class="challenge-preview">
            <strong>Challenge 4: Typing Challenge</strong><br>
            "Type exactly: 'I understand that accessing distracting websites reduces my productivity...'"<br>
            <em>Must type entire productivity message perfectly without copy/paste.</em>
        </div>
        
        <div class="challenge-preview">
            <strong>Challenge 5: Pattern Recognition</strong><br>
            "Complete sequence: 2, 6, 18, 54, ?"<br>
            <em>Users must identify mathematical patterns and provide next number.</em>
        </div>
        
        <div class="challenge-preview">
            <strong>Challenge 6: Self-Reflection</strong><br>
            "Write 100+ words about productivity vs distraction..."<br>
            <em>Mandatory essay writing with word count verification.</em>
        </div>
        
        <div class="challenge-preview">
            <strong>Challenge 7: Final Confirmation</strong><br>
            "Type exactly: 'I UNDERSTAND THE CONSEQUENCES'"<br>
            <em>Case-sensitive final confirmation with warning animation.</em>
        </div>
    </div>

    <div class="test-section">
        <h2>‚öôÔ∏è Extension Testing</h2>
        <p>Test various extension functionalities:</p>
        
        <button class="btn btn-success" onclick="testExtensionCommunication()">
            üîß Test Extension Communication
        </button>
        
        <button class="btn" onclick="simulateBlockedSite()">
            üö´ Simulate Site Blocking
        </button>
        
        <button class="btn" onclick="checkLocalStorage()">
            üíæ Check Local Storage
        </button>
        
        <div id="testResults" class="status">
            Click buttons above to run tests...
        </div>
    </div>

    <div class="test-section">
        <h2>üìä Process Statistics</h2>
        <p>The difficult unblock process is designed to:</p>
        <ul>
            <li>Take <strong>8-15 minutes</strong> to complete (including wait time)</li>
            <li>Require <strong>focused attention</strong> throughout the process</li>
            <li>Make users <strong>question their decision</strong> multiple times</li>
            <li>Create <strong>deliberate friction</strong> to discourage repeated attempts</li>
            <li>Educate about <strong>productivity consequences</strong> through reflection</li>
            <li>Provide <strong>temporary access only</strong> (2-hour re-blocking)</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>üîÑ Reset & Management</h2>
        <p>Administrative functions:</p>
        
        <button class="btn" onclick="clearUnblockData()">
            üóëÔ∏è Clear Unblock Data
        </button>
        
        <button class="btn btn-success" onclick="addTestSites()">
            ‚ûï Add Test Blocked Sites
        </button>
        
        <button class="btn btn-danger" onclick="removeAllBlocks()">
            ‚ùå Remove All Blocks
        </button>
    </div>

    <script>
        function testExtensionCommunication() {
            const results = document.getElementById('testResults');
            results.className = 'status';
            results.textContent = 'Testing extension communication...';
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({
                    action: 'test_connection'
                }, (response) => {
                    if (chrome.runtime.lastError) {
                        results.className = 'status error';
                        results.textContent = 'Extension communication failed: ' + chrome.runtime.lastError.message;
                    } else {
                        results.className = 'status success';
                        results.textContent = 'Extension communication successful!';
                    }
                });
            } else {
                results.className = 'status error';
                results.textContent = 'Chrome extension API not available. Make sure this page is loaded as an extension resource.';
            }
        }

        function simulateBlockedSite() {
            const results = document.getElementById('testResults');
            results.className = 'status';
            results.textContent = 'Simulating site blocking...';
            
            // Redirect to the difficult unblock page
            window.location.href = 'difficult-unblock.html?url=test-site.com';
        }

        function checkLocalStorage() {
            const results = document.getElementById('testResults');
            try {
                const unblockStatus = localStorage.getItem('unblock_status');
                const unblockTime = localStorage.getItem('unblock_time');
                
                if (unblockStatus || unblockTime) {
                    results.className = 'status success';
                    results.innerHTML = `
                        Local Storage Data Found:<br>
                        Status: ${unblockStatus || 'none'}<br>
                        Time: ${unblockTime ? new Date(parseInt(unblockTime)).toLocaleString() : 'none'}
                    `;
                } else {
                    results.className = 'status';
                    results.textContent = 'No unblock data found in local storage.';
                }
            } catch (error) {
                results.className = 'status error';
                results.textContent = 'Error accessing local storage: ' + error.message;
            }
        }

        function clearUnblockData() {
            const results = document.getElementById('testResults');
            try {
                localStorage.removeItem('unblock_status');
                localStorage.removeItem('unblock_time');
                results.className = 'status success';
                results.textContent = 'Unblock data cleared from local storage.';
            } catch (error) {
                results.className = 'status error';
                results.textContent = 'Error clearing data: ' + error.message;
            }
        }

        function addTestSites() {
            const results = document.getElementById('testResults');
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({
                    action: 'add_test_sites'
                }, (response) => {
                    if (chrome.runtime.lastError) {
                        results.className = 'status error';
                        results.textContent = 'Failed to add test sites: ' + chrome.runtime.lastError.message;
                    } else {
                        results.className = 'status success';
                        results.textContent = 'Test sites added for blocking (facebook.com, youtube.com, reddit.com, twitter.com)';
                    }
                });
            } else {
                results.className = 'status error';
                results.textContent = 'Extension API not available.';
            }
        }

        function removeAllBlocks() {
            const results = document.getElementById('testResults');
            
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({
                    action: 'remove_all_blocks'
                }, (response) => {
                    if (chrome.runtime.lastError) {
                        results.className = 'status error';
                        results.textContent = 'Failed to remove blocks: ' + chrome.runtime.lastError.message;
                    } else {
                        results.className = 'status success';
                        results.textContent = 'All site blocks removed successfully.';
                    }
                });
            } else {
                results.className = 'status error';
                results.textContent = 'Extension API not available.';
            }
        }

        // Auto-test on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('testResults').textContent = 'Page loaded successfully. Click test buttons above.';
            }, 1000);
        });
    </script>
</body>
</html>
